<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<!--

Workarounds for Hibernate bugs, mostly.

@author Christian Bauer
-->
<hibernate-mapping package="org.jboss.seam.wiki.core.model" default-access="field">

    <!--
        TODO: http://opensource.atlassian.com/projects/hibernate/browse/HHH-1657
    -->
    <sql-query name="updateNestedSet.org.jboss.seam.wiki.core.model.WikiComment">
        <query-param name="left" type="long"/>
        <query-param name="right" type="long"/>
        <query-param name="thread" type="long"/>
        <query-param name="id" type="long"/>
        update WIKI_COMMENT set NS_LEFT = :left, NS_RIGHT = :right, NS_THREAD = :thread where NODE_ID = :id
    </sql-query>
    <sql-query name="updateNestedSet.org.jboss.seam.wiki.core.model.WikiDirectory">
        <query-param name="left" type="long"/>
        <query-param name="right" type="long"/>
        <query-param name="thread" type="long"/>
        <query-param name="id" type="long"/>
        update WIKI_DIRECTORY set NS_LEFT = :left, NS_RIGHT = :right, NS_THREAD = :thread where NODE_ID = :id
    </sql-query>
    <sql-query name="updateNestedSet.org.jboss.seam.wiki.test.nestedset.TestDirectory">
        <query-param name="left" type="long"/>
        <query-param name="right" type="long"/>
        <query-param name="thread" type="long"/>
        <query-param name="id" type="long"/>
        update TEST_DIRECTORY set NS_LEFT = :left, NS_RIGHT = :right, NS_THREAD = :thread where ITEM_ID = :id
    </sql-query>

</hibernate-mapping>

